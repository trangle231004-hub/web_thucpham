<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index - Cửa hàng thực phẩm</title>
    <!-- Link img web -->
    <link rel="icon" href="./assets/images/img_Logo.png" type="image/png">
    <!-- Link CSS -->
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/HomePage.css">
    <!-- Link Icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>

<body>
    <!-- HEADER COMPONENT CONTAINER -->
    <div id="header-container"></div>
    <!-- END HEADER COMPONENT -->

    <!-- The rest of the page is identical to HomePage layout -->
    <!-- CATALOG & IMAGES -->
    <div class="Catalog_Images py-5">
        <div class="container">
            <div class="row g-4">
                <!-- DANH MỤC -->
                <div class="col-xl-4">
                    <div class="catalog h-100">
                        <div class="name_catalog">DANH MỤC</div>
                        <div class="list_catalog">
                            <ul class="list-unstyled m-0">
                                <li><a href="CategoryPage.html?category=hai-san"><i class="fa-solid fa-right-long"></i> Hải sản vùng miền</a></li>
                                <li><a href="CategoryPage.html?category=hang-kho"><i class="fa-solid fa-right-long"></i> Hàng khô</a></li>
                                <li><a href="CategoryPage.html?category=rau-cu"><i class="fa-solid fa-right-long"></i> Rau củ hữu cơ</a></li>
                                <li><a href="CategoryPage.html?category=thit-ca"><i class="fa-solid fa-right-long"></i> Thịt cá dân dã</a></li>
                                <li><a href="CategoryPage.html?category=trai-cay"><i class="fa-solid fa-right-long"></i> Trái cây theo mùa</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- CAROUSEL ẢNH -->
                <div class="col-xl-8">
                    <div id="carouselExampleIndicators" class="carousel slide shadow-lg rounded-3 overflow-hidden"
                        data-ride="carousel" data-interval="4000">
                        <!-- Indicators -->
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
                        </ol>
                        <!-- Slides -->
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="./assets/images/List_Image_Main/main_1.png" class="d-block w-100"
                                    alt="Main 1">
                            </div>
                            <div class="carousel-item">
                                <img src="./assets/images/List_Image_Main/main_2.png" class="d-block w-100"
                                    alt="Main 2">
                            </div>
                            <div class="carousel-item">
                                <img src="./assets/images/List_Image_Main/main_3.png" class="d-block w-100"
                                    alt="Main 3">
                            </div>
                            <div class="carousel-item">
                                <img src="./assets/images/List_Image_Main/main_4.png" class="d-block w-100"
                                    alt="Main 4">
                            </div>
                            <div class="carousel-item">
                                <img src="./assets/images/List_Image_Main/main_5.png" class="d-block w-100"
                                    alt="Main 5">
                            </div>
                        </div>
                        <!-- NÚT TRÁI/PHẢI (TRÒN XANH LÁ) -->
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button"
                            data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button"
                            data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- end catalog and images -->

    <!-- transparent -->
    <div class="transparent">
        <div class="container">
            <div class="row">
                <div class="col-xl-4">
                    <div class="transparent_box">
                        <img src="./assets/images/List_Image_Main2/QTTN.png" alt="Quy trình thuận tự nhiên">
                        <h5>Quy trình thuận tự nhiên</h5>
                        <p>Thuận tự nhiên là tôn chỉ của chúng tôi trong quá trình chăn nuôi, trồng cấy các sản phẩm để
                            cung cấp đến người tiêu dung tại hệ thống chuỗi thực phẩm sạch.</p>
                    </div>
                </div>
                <div class="col-xl-4">
                    <div class="transparent_box">
                        <img src="./assets/images/List_Image_Main2/CCUTC.png" alt="Chuỗi cung ứng tiêu chuẩn">
                        <h5>Chuỗi cung ứng tiêu chuẩn</h5>
                        <p>Bộ phận kỹ sư thực địa tại Cửa hàng luôn giám sát nghiêm ngặt đối với các Hợp tác xã , đối
                            tác tham gia trong chuỗi cung ứng tiêu chuẩn của chúng tôi.</p>
                    </div>
                </div>
                <div class="col-xl-4">
                    <div class="transparent_box">
                        <img src="./assets/images/List_Image_Main2/NGMB.png" alt="Nguồn gốc minh bạch">
                        <h5>Nguồn gốc minh bạch</h5>
                        <p>Sản phẩm thuận tự nhiên phải có thông tin nguồn gốc, quá trình nuôi trồng, sản phẩm được công
                            khai minh bạch theo thời gian thực trên từng sản phẩm.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end transparent -->

    <!-- best-selling product -->
    <div class="best_sell_product">
        <div class="container">
            <!-- TIÊU ĐỀ -->
            <div class="row mb-4 align-items-center">
                <div class="col-xl-6">
                    <p class="sell_title">SẢN PHẨM BÁN CHẠY</p>
                </div>
                <div class="col-xl-6 essential_nutrition">Dinh dưỡng thiết yếu <i class="fa-solid fa-arrow-right"></i>
                </div>
            </div>
            <!-- CAROUSEL + NÚT -->
            <div class="list_products_sell d-flex align-items-center justify-content-center position-relative">
                <!-- NÚT TRÁI -->
                <button class="carousel-control-btn prev-btn" type="button" data-target="#productsCarousel"
                    data-slide="prev">
                    <!-- data-target="#productsCarousel" + data-slide="prev/next" Nút biết bấm vào carousel nào, sang trái/phải -->
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <!-- CAROUSEL -->
                <div id="productsCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
                    <!-- class="carousel" ==> Báo cho Bootstrap: "Đây là carousel!" -->
                    <!-- data-ride="carousel" ==> Tự động khởi động carousel khi load trang -->
                    <!-- class="slide" ==> Kích hoạt hiệu ứng trượt mượt khi nhấn qa trái or phải-->
                    <div class="carousel-inner px-5">
                        <!-- SLIDE 1 -->
                        <div class="carousel-item active">
                            <div class="row justify-content-center">
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_1.png"
                                            alt="Ổi lê Đại Lan">
                                        <h6>Ổi lê Đại Lan</h6>
                                        <div class="price">30.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_2.png"
                                            alt="Đu đủ ruột đỏ Thái Lan">
                                        <h6>Đu đủ ruột đỏ Thái Lan</h6>
                                        <div class="price">20.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_3.png"
                                            alt="Hồng trứng Nghệ An">
                                        <h6>Hồng trứng Nghệ An</h6>
                                        <div class="price">115.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_4.png"
                                            alt="Cá rói chiên sơ">
                                        <h6>Cá rói chiên sơ</h6>
                                        <div class="price">184.000₫</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- SLIDE 2 -->
                        <div class="carousel-item">
                            <div class="row justify-content-center">
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_5.png"
                                            alt="Tôm rừng hấp">
                                        <h6>Tôm rừng hấp</h6>
                                        <div class="price">498.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_6.png"
                                            alt="Bưởi Phúc Trạch">
                                        <h6>Bưởi Phúc Trạch Hữu Cơ</h6>
                                        <div class="price">65.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_7.png" alt="Kombucha">
                                        <h6>Kombucha quả dại</h6>
                                        <div class="price">55.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Products_Sell/Sell_8.png" alt="Rau rừng">
                                        <h6>Rau rừng</h6>
                                        <div class="price">15.000₫</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- NÚT PHẢI -->
                <button class="carousel-control-btn next-btn" type="button" data-target="#productsCarousel"
                    data-slide="next">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
    <!-- end best-selling product -->

    <!-- DAILY PROMOTIONS (Ưu đãi mỗi ngày) -->
    <div class="daily_promotions">
        <div class="container">
            <!-- TIÊU ĐỀ -->
            <div class="row mb-4 align-items-center">
                <div class="col-xl-6">
                    <p class="sell_title">ƯU ĐÃI MỖI NGÀY</p>
                </div>
                <div class="col-xl-6 essential_nutrition">
                    Combo sản phẩm <i class="fa-solid fa-arrow-right"></i>
                </div>
            </div>

            <!-- CAROUSEL + NÚT -->
            <div class="list_products_sell d-flex align-items-center justify-content-center position-relative">
                <!-- NÚT TRÁI -->
                <button class="carousel-control-btn prev-btn" type="button" data-target="#dailyCarousel"
                    data-slide="prev">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>

                <!-- CAROUSEL -->
                <div id="dailyCarousel" class="carousel slide w-100" data-ride="carousel" data-interval="false">
                    <div class="carousel-inner">

                        <!-- SLIDE 1 -->
                        <div class="carousel-item active">
                            <div class="row justify-content-center">
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro1.png"
                                            alt="Trứng gà H'mông">
                                        <h6>Trứng gà H'mông</h6>
                                        <div class="price">6.600₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro2.png"
                                            alt="Gạo séng cù">
                                        <h6>Gạo séng cù Lào Cai</h6>
                                        <div class="price">53.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro3.png"
                                            alt="Trứng gà ri muối">
                                        <h6>Trứng gà ri muối</h6>
                                        <div class="price">5.600₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro4.png"
                                            alt="Trứng gà so">
                                        <h6>Trứng gà so</h6>
                                        <div class="price">5.200₫</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SLIDE 2 -->
                        <div class="carousel-item">
                            <div class="row justify-content-center">
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro5.png"
                                            alt="Ổi Lê Phúc Lợi">
                                        <h6>Ổi Lê Phúc Lợi</h6>
                                        <div class="price">55.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro6.png"
                                            alt="Bánh ram">
                                        <h6>Bánh ram Hà Tĩnh</h6>
                                        <div class="price">45.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro7.png"
                                            alt="Đậu phụ">
                                        <h6>Đậu phụ bìa</h6>
                                        <div class="price">6.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro8.png"
                                            alt="Cải ngồng">
                                        <h6>Cải ngồng RH (túi)</h6>
                                        <div class="price">23.000₫</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SLIDE 3 -->
                        <div class="carousel-item">
                            <div class="row justify-content-center">
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro9.png"
                                            alt="Cá hồi fillet Nauy">
                                        <h6>Cá hồi fillet Nauy</h6>
                                        <div class="price">824.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro10.png"
                                            alt="Dưa hấu giống Nhật">
                                        <h6>Dưa hấu giống Nhật</h6>
                                        <div class="price">48.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro11.png"
                                            alt="Quả su su RH">
                                        <h6>Quả su su RH</h6>
                                        <div class="price">52.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro12.png"
                                            alt="Nem cuốn">
                                        <h6>Nem cuốn nhỏ rán</h6>
                                        <div class="price">50.000₫</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SLIDE 4 -->
                        <div class="carousel-item">
                            <div class="row justify-content-center">
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro13.png"
                                            alt="Rau thơm tổng hợp RB">
                                        <h6>Rau thơm tổng hợp RB</h6>
                                        <div class="price">70.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro14.png"
                                            alt="Cá đầm lúa Thanh Lãng">
                                        <h6>Cá đầm lúa Thanh Lãng</h6>
                                        <div class="price">120.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro15.png"
                                            alt="Thì là RB">
                                        <h6>Thì là RB</h6>
                                        <div class="price">395.000₫</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-4">
                                    <div class="product-card">
                                        <img src="./assets/images/List_Image_Daily_promotions/cb_pro16.png"
                                            alt="Bắp cải RA">
                                        <h6>Bắp cải RA</h6>
                                        <div class="price">52.000₫</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NÚT PHẢI -->
                <button class="carousel-control-btn next-btn" type="button" data-target="#dailyCarousel"
                    data-slide="next">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
    <!-- end daily promotions -->

    <!-- IMG - THE STORY "BACTOM" -->
    <div class="the_story_BT">
        <div class="container">
            <img src="./assets/images/With_BacTom/story_BacTom.png" alt="THE STORY BACTOM">
        </div>
    </div>
    <!-- END IMG - THE STORY "BACTOM" -->

    <!-- IMG - vegetables -->
    <div class="img_vegetables">
        <div class="container">
            <div class="row">
                <div class="col-xl-6">
                    <img src="./assets/images/With_BacTom/organic_vegetables.png" alt="Organic vegetables">
                </div>
                <div class="col-xl-6">
                    <img src="./assets/images/With_BacTom/safe_vegetables.png" alt="Safe vegetables">
                </div>
            </div>

        </div>
    </div>
    <!-- END IMG - vegetables -->

    <!-- FOOTER COMPONENT CONTAINER -->
    <div id="footer-container"></div>
    <!-- END FOOTER COMPONENT -->

    <!-- MODALS COMPONENT CONTAINER -->
    <div id="modals-container"></div>
    <!-- END MODALS COMPONENT -->

    <!-- SLIDE -> Bootstrap 4 JS + Popper + jQuery (phải đúng thứ tự) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <!-- Component Loader -->
    <script src="assets/js/component-loader.js"></script>

    <!-- Category/product data (used to sync images) -->
    <script src="assets/js/CategoryPage.js"></script>

    <!-- Add product links to detail page and sync images/prices from productData -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sync product images and prices based on product name using productData
            const allCategories = Object.values(productData || {});
            const flatProducts = [].concat(...allCategories);

            const productCards = document.querySelectorAll('.product-card');
            productCards.forEach(card => {
                const productNameEl = card.querySelector('h6');
                const imgEl = card.querySelector('img');
                const priceEl = card.querySelector('.price');
                if (productNameEl) {
                    const name = productNameEl.textContent.trim();
                    // find product by name across categories (exact match)
                    const match = flatProducts.find(p => p.name === name);
                    if (match) {
                        if (imgEl) { imgEl.src = match.image; imgEl.alt = match.name; }
                        if (priceEl && typeof match.price !== 'undefined') {
                            priceEl.textContent = match.price.toLocaleString('vi-VN') + '₫';
                        }
                    }

                    card.style.cursor = 'pointer';
                    card.addEventListener('click', function() {
                        window.location.href = 'ProductDetail.html?id=' + encodeURIComponent(name);
                    });
                }
            });
        });
    </script>

    <!-- Index auth replacement: show avatar + username, require login -->
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            try{
                var current = JSON.parse(localStorage.getItem('currentUser') || 'null');
                if(!current){ window.location.href = 'HomePage.html'; return; }

                function waitForHeader(cb){
                    var authEl = document.querySelector('.auth_input');
                    if(authEl) return cb(authEl);
                    setTimeout(function(){ waitForHeader(cb); }, 200);
                }

                waitForHeader(function(authEl){
                    // Use the shared updateAuthUI() so the avatar + dropdown is consistent across pages
                    try{
                        if(typeof updateAuthUI === 'function'){
                            updateAuthUI();
                        } else {
                            // fallback: simple avatar + name
                            var name = current.username || current.phoneOrEmail || 'Khách hàng';
                            var avatarSrc = current.avatar || './assets/images/img_Logo.png';
                            authEl.innerHTML = '<div class="user-profile d-flex align-items-center">'
                                + '<img src="'+ escapeHtml(avatarSrc) + '" alt="avatar" style="width:36px;height:36px;border-radius:50%;margin-right:8px;">'
                                + '<div class="user-name">'+ escapeHtml(name) +'</div></div>';
                        }

                        // Also update cart count so header shows the current number
                        try{ if(window.updateCartCount) updateCartCount(); }catch(e){ /*ignore*/ }
                    }catch(e){ console.warn('Index auth init failed', e); }
                });
            }catch(e){ window.location.href = 'HomePage.html'; }
        });

        function escapeHtml(str){ return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;'); }
    </script>

</body>
</html>
